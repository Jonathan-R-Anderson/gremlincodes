{% extends "base.html" %}

{% block content %}
<h1>Live Stream</h1>

<!-- Embed Magnet URL and Video Player -->
<h3>Magnet URL for Seeding: <a href="{{ magnet_url }}">{{ magnet_url }}</a></h3>

<video id="streamPlayer" controls autoplay></video>
{% endblock %}

{% block scripts %}
<script>
    const magnetUrl = "{{ magnet_url }}";
    const client = new WebTorrent();

    // Play the stream using WebTorrent
    if (magnetUrl) {
        client.add(magnetUrl, function (torrent) {
            torrent.files[0].renderTo('video#streamPlayer');
        });
    } else {
        alert("Magnet URL not available.");
    }
</script>
{% endblock %}
